---
title: 'Intro to R: Day 1 Part 2'
output:
  html_document: default
  word_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Terms

**Factors:** the data objects which are used to categorize the data and store it as levels. They can store both strings and integers. They are useful in the columns which have a limited number of unique values. These would be used in datasets that have demographic data such as age, sex, political party, etc

**Vectors**:  Vector is a basic data structure in R.  
-  contains element of the same type. 
- Ttypehe data types can be logical, integer, double, character, complex or raw.

A vectorâ€™s type can be checked with the typeof() function.

Another important property of a vector is its length. This is the number of elements in the vector and can be checked with the function length().

## Data Frames and Subsetting  

Part 2 of the workshop. Start at 'Realsitic Example' <https://swcarpentry.github.io/r-novice-gapminder/05-data-structures-part2/index.html#realistic-example>

We are going to use the datafile that you downloaded into your project data folder.

###There are at least three different ways to read in data:


1) read the file from your data folder

```{r}
gapminder <- read.csv("data/gapminder_data.csv", stringsAsFactors = TRUE)
```

2) download the file in-code and then read in
```{r}
download.file("https://raw.githubusercontent.com/swcarpentry/r-novice-gapminder/main/data/gapminder_data.csv", destfile = "data/gapminder_data.csv")

gapminder <- read.csv("data/gapminder_data.csv", stringsAsFactors = TRUE)
```

3) read directly from the internet
```{r}
gapminder <- read.csv("https://raw.githubusercontent.com/swcarpentry/r-novice-gapminder/main/data/gapminder_data.csv", stringsAsFactors = TRUE)
```


Lasty, if you have a file type you're not sure about (SAS, SPSS, etc) you can use the 'Import Dataset'from the RStudio interface.

![Import Dataset interface](images/data-import.jpg)

## Examine your dataset using the str() and summary() functions

**str()** or allows you to get a compact look at the layout or *structure* of your dataset 

```{r}
str(gapminder)

```
 
 **List out the column names**
```{r}
colnames(gapminder)
```
 


**summary(*object*) is another way to examine your dataset. It gives you numeric, tabular, or descriptive summary of each column. 

```{r}
summary(gapminder)
```


You can also summarize a column: 

```{r}
head(summary(gapminder$country), n=15)
```

### Other functions you can use to examine data: 
(demo) 
typeof(object$column) 
```{r}
typeof(gapminder$year)
```

   
Use **str()** on a column:   **str(country$year)**   

We can also interrogate the data frame for information about its dimensions; remembering that str(gapminder) said there were 1704 observations of 6 variables in gapminder, what do you think the following will produce, and why?

```{r}
length(gapminder)  
```

### Get the number of Rows and Columns  

**nrow(gapminder)** 

**ncol(gapminder)**  

**dim(gapminder)**    to get both rows and colums   


###  Display the beginning or end of a dataset  

Recall from the shell lesson the head() and tail() functions   

head(gapminder)  

tail(gapminder)  


##  Subsetting your data  

### Subsetting Operatiors    

Why subset? 


**Elements can be accessed by their indices**

**Remember: R starts at 1  (not 0) so the first index is 1** 

Try this:  essentially get me the nth element
```{r}

  head(gapminder[1])  
```

1st column   

  
And then:  
```{r}
  head(gapminder[1,1])   
```

1st column, first element



**Multiple elements:   accessing two or more columns**  
```{r}
head(gapminder[c(1, 3)])   
```
 
 
## Slice all of a specific row  
 
```{r}
gapminder[3, ]
```
 
## Slice all of a specific column  
```{r}
head(gapminder[ , 3])
```


 
**Slice to access multiple consecutive columns**  

```{r}
head(gapminder[1:4])
```


**Question:  what happens if you ask for an index that doesn't exist?**  
Try gapminder[1:8]


**how would you check to see what the size of the dataset is?**  

dim(gapminder)


### Subsetting by name: create a subset of country, population and gdpPercap data       
```{r}
head(gapminder[c("country", "pop", "gdpPercap")])
```


### Factor subsetting:  subset by category (ie. race, sex, age, etc)

There isn't a column like this in gapminder but you may run into this with datasets that have demographic data.


I've been using the head() function to only display the first 10 (default number) of rows.

Another way to look at a section of the dataset is:

```{r}
gapminder[1:15,]
```

Explain the syntax example
  
gapminder[1:3, 5]   

gapminder[1:3, ]   


## Other ways to extract based on values 

```{r}
gapminder[gapminder$lifeExp > 80, ]
```


But you won't see the countries, so  

```{r}
gapminder[gapminder$lifeExp > 80, 1:5]
```

  


or  to get all the columns  
```{r}
gapminder[gapminder$lifeExp > 80,]
```





## Extract specific rows   

```{r}

gapminder[c(1:9, 19:23),]
```




### Subset by logical operators:  

```{r}
head(gapminder[gapminder$year == 1957,] )
```



### AND  OR   

```{r}
head(gapminder[gapminder$year > 1957 | gapminder$year < 1987, ])
```


or  
```{r}
head(gapminder[gapminder$year %in% c(1957, 1987),])
```

```{r}
head(gapminder[gapminder$year > 1957 | gapminder$year < 1987 | gapminder$lifeExp < 60 , ])
```





## Right now these subset only exists in memory, save as a separate frame  


```{r}
mySlice <- gapminder[gapminder$year > 1957 | gapminder$year < 1987 | gapminder$lifeExp < 60 , ]  
```


### Adding or Removing columns
Up to now we have been displaying slices of a dataframe, gapminder, not actually adding or removing columns. Acting on our dataframe doesn't change the original data so it is possible to add or delete without impacting your oridinal dataset

**Adding a column
```{r}
medianAge <- gapminder$lifeExp

# this one dosn't work
# cbind(gapminder, medianAge)

gapminder <- cbind(gapminder, medianAge)

colnames(gapminder)
```



** Removing a column

```{r}
# this also didn't work as-is so I added gapminder <- 
gapminder <- gapminder[ , -7]

colnames(gapminder)
```

##  Add a row

```{r}
newRow <-  gapminder[47, ]

gapminder <- rbind(gapminder, newRow)

tail(gapminder)
```



## Remove a row

```{r}
gapminder <- gapminder[-1705, ]

tail(gapminder)


```




